<!-- HEADER 9-4-3: Spice -->

<!-- COMMAND Tool/Simulation (Spice)/Write Spice Deck... -->
<!-- COMMAND Tool/Simulation (Spice)/Plot Spice Listing... -->
<!-- COMMAND Tool/Simulation (Spice)/Plot Spice for This Cell -->
<!-- COMMAND Tool/Simulation (Spice)/Add Multiplier -->
<!-- COMMAND Tool/Simulation (Spice)/Set Spice Model... -->
<!-- PREFERENCE Tools/Spice -->


В Electric с помощью команды <B>Write Spice Deck...</B> 
меню (<B>Tool / Simulation (Spice)</B>) можно создавать входные записи для Spice симуляторов.
Далее, для получения выходного файла симуляции, необходимо использовать внешний симулятор,
т.к. дистрибутив Electric не включает в себя Spice симулятор.
<P>
Cчитать выходной фаил, полученный с внешнего симулятора, обратно в Electric,
можно посмотреть графики симуляции. Так как форматы выходного файла могут быть различными,
сперва вы должны установить значения в полях "Spice Engine" (Spice устройство) и "Output format" (Выходной формат) в
"Spice" настройках, меню (<B>File / Preferences...</B>, "Tools" закладка, "Spice").
Для дефолтового выходного файла Spice устройства, значение поля "Output format" - "Standard";
"Raw" (необработанные данные ( один из типов данных, устанавливаемых для заданий на печать, 
указывает спулеру на то, что он не должен вносить никаких изменений в задание на печать, 
так как оно уже имеет формат, в котором должно выводиться на распечатку ) для загрузки rawfile;
и "Raw/Smart" для загрузки rawfile из SmartSpice.
<P>
После того как вы сообщили Electric, какой формат выходного файла ему ожидать, используйте команду <B>Plot Spice Listing...</B>
меню (<B>Tool / Simulation (Spice)</B>) для считывания файла.
Если фаил имеет такое же имя как и текущая ячейка, то вы можете использовать более простую команду
<B>Plot Spice for This Cell</B>,
которая не требут указания на имя файла.
Информация Spice симуляции представляется в виде анологовой формы
(смотри <A HREF="chap04-12-02.html#chap04-12-02">Section 4-12-2</A> для более подробной информации).
<P>
Существует много возможностей запуска Spice с Electric.
Пример, показанный ниже, иллюстрирует, некоторые из них.
Этот пример можно запустит, выбрав "tool-SimulateSpice" из библиотеки Samples.
(команда <B>Load Library</B> меню <B>Help / Samples</B>).
<P>
<TABLE><TR><TD>
Входные значения для Spice контролируются специальными узлами, 
которые можно найти на закладке "Spice" компонентного меню.
Обратите внимание, что первоначально Spice узлы отсутствуют, поэтому библиотека узлов загружается в Electric отдельно.
</TD><TD><CENTER><IMG SRC="fig09-30.png" ALT="Figure 9.30"></CENTER></TD></TR></TABLE>
<P>
Spice примитивы описанные сдесь, относятся к дефолтовому набору примитивов Electric(а).
Дополнительный набор приметивов может и должен быть написан.
Нужный набор примитивов можно установить
в Spice настройках меню  (<B>File / Preferences...</B>, "Tools" закладка, "Spice").
Для этого в поле "Spice primitive set", выберете нужный набор.
Набор "SpicePartsS3", был выполнен специально для Spice3 примитивов.
<P>
<TABLE><TR>
<TD><CENTER><IMG SRC="fig09-08.png" ALT="Figure 9.8"></CENTER></TD><TD>
В нашем примере, слева расположено 5-и вольтовое питание.
Оно было установлено с использованием примитива "DC Voltage" из списка "Spice" компонентного меню.
После установки примитива, появляется текст с параметрами примитива, в нашем примере "Voltage=0V", который можно изменять.
(либо с помощью <B>Object Properties...</B> либо двойным нажатием на него).
Импульсный входной сигнал, расположенный справ, был сделан с использованием примитива "Pulse" (приметив имеет 7 параметров).
<P>
В списке приметивов находятся как источники постоянного напряжения и тока (DC форма),
так и источники переменного тока и напряжения (AC форма).
Набор устройств с двумя выходами ("two-gate") и передающее устройство также доступны: "CCCS", "CCVS", "VCCS", "VCVS",
"Transmission".
<P>
Так же возможно устанавливать кратковременные, DC, или AC анализы,  используя субкоманды "Transient Analysis",
"DC Analysis", and "AC Analysis".
В одной схеме может использоватся только один такой элемент
</TD></TR></TABLE>
<P>
Для продвинутых пользователе, существуют специальные Spice узлы: "Node Set" и "Extension".
Эти узлы могут быть параметризованные с помощью произвольного Spice кода.
В действительности продвинутые пользователи могут сами создавать собственные
Spice узлы, изменяя ячейки в Spice библиотеки.
<P>
Наш пример так же демонстрирует возможность добавлять произвольный комментарий к Spice записям (правый нижний угол).
Для добавления комментария необходимо выбрать "Add Spice Card" из компонентного меню "Misc.".
The command creates a piece of text that can be modified arbitrarily.
Любой текст будет добавлен к Spice записи:)
<P>
Ещё одна возможность, которая может быть использована при моделирование транзисторов и других элементов, это
установка определенной Spice модели для этих элементов.
Для установки узловой модели, отметьте узел и используя команду 
<B>Set Spice Model...</B> меню <B>Tool / Simulation (Spice)</B>) установите нужное значение.
<P>
Субкоманда <B>Add Multiplier</B> на выбранном узле размещает умножитель.
Умножитель (его так же называют "M" коэффициентом) определяет размер транзисторов внутри узла.
<P>
<!-- NEED 7in -->
В настройках "Spice" меню (<B>File / Preferences...</B>, "Tools" закладка, "Spice") некоторая не графическая информация 
так же может быть передана Spice симулятору.
<P>
<CENTER><IMG SRC="fig09-03.png" ALT="Figure 9.3"></CENTER>
<P>
Верхней части диалогового окна приведены параметры Spice записи такие как:
<UL>
<LI><B>Spice Engine(Spice устройство)</B> Возможные варианты Spice 2, Spice 3, HSpice, PSpice, Gnucap, или SmartSpice.</LI>
<LI><B>Spice Level(уровень Spice описания)</B> Возможные варианты 1, 2, или 3.</LI>
<LI><B>Output format(выходной формат)</B> Ожидаемый формат выходного Spice файла при считывание его Electric(ом)</LI>
<LI><B>Use Parasitics(паразитные ёмкости и сопротивления)</B> Выбор включать их в Spice запись или нет.</LI>
<LI><B>Use Node Names(имена узлов)</B> Также на выбор можно оставить натуральные имена с Spice записях или использовать только числовые индексы.</LI>
<LI><B>Force Global VDD/GND</B> Принуждать ли питание и землю иметь глобальные имена (VDD и GND).</LI>
<LI><B>Use Cell Parameters</B> При установке, все параметры определенные в ячейки показываются в Spice записи.
Если пункт не отмечен, то каждая параметризованная ячейка определяется в записи несколько раз, по разу для каждой комбинации
параметров.
Смотри <A HREF="chap06-08-06.html#chap06-08-06">Section 6-8-6</A> более подробно о параметрах.
<LI><B>Write Trans Sizes in Units</B> Установка приводит к тому, что Spice запись включает информацию о наращиваемых размерах,
помимо информации об абсолютных размерах.</LI>
<LI><B>Spice Primitive Set(установка примитивов)</B> Переключение между наборами Spice примитивов.
На данный момент доступно только два набора: "spiceparts" и "spicepartsG3".</LI>
</UL>
<P>
<B>Запуск параллельного процесса:</B> Для запуска Spice по сгенерированному выходному файлу,
Electric может создавать внешний процесс, установленный пользователем. 
"Don't Run", означает что возможность не используется.
При установлении пункта "Run, Ignore Output", внешний процесс запускается, с сообщением пользователю о его окончании.
При установке пункта "Run, Report Output", появляется диалоговое окно,
показывающее пользователю выход сгенерированный внешним процессом.
<P>
Некоторые опции задаваемые внешнему процессу:
<UL>
<LI><B>Use Dir(используемая директория)</B> установка рабочей директории внешнего процесса.</LI>
<LI><B>Overwrite existing file(перезапись существующего файла)</B> при установке выходной файл Electric для Spice перепишется после 
окончания процесс в выходной файл Spice.</LI>
<LI><B>Run probe</B> установка запустит графическое отображение выходного Spice файла.</LI>
<LI><B>Help</B> помощь о экспортируемых переменных среды используемых внешним процессом.</LI>
<LI><B>Run program</B> имя .exe файла запуска.</LI>
<LI><B>with arg</B> аргументы идущие с .exe файлом.</LI>
</UL>
<P>
Ниже находятся настройки меток (header и trailer), раполагающихся в начале и конце Spice записи. 
С помощью диалогового окна вы можете установить файл (метку) с описанием для использования взамен создаваемому набору. 
Вы можете определить особый файл или указать системе найти файл с именем ячейки и указанным расширением.
<P>
Обратите внимание, что устанавлеваемая информация специфизируется для данной технологии.
Если вы установили метку для одной технологии, 
то при снятие Spice записи при другой технологии, установленная информация использоватся не будет.
Несматря на то, что в Electric schematic является технологией, к Spice технологиям он не относится. 
При работе со schematic вы можете установить нужную layout технологию, выбрав 
"Use Scale values from this Technology" в настройках
"Technology" меню (<B>File / Preferences...</B>, "Technology" закладка, "Technology").
<P>
В нижня чясть диалогового окна позволяет осбый файл с жесткого диска для Spice меток, который будеет использоватся для описания ячейки.

В отличии от подсхемы ячейки, установленный файл включается в Spice запись.
<!-- TRAILER -->
