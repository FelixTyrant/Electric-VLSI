<!-- HEADER 9-9: Logical Effort -->

<!-- COMMAND Tool/Logical Effort/Optimize for Equal Gate Delays -->
<!-- COMMAND Tool/Logical Effort/Optimize for Equal Gate Delays (no caching) -->
<!-- COMMAND Tool/Logical Effort/Print Info for Selected Node -->
<!-- COMMAND Tool/Logical Effort/Back Annotate Wire Lengths for Current Cell -->
<!-- COMMAND Tool/Logical Effort/Clear Sizes on Selected Node(s) -->
<!-- COMMAND Tool/Logical Effort/Clear Sizes in all Libraries -->
<!-- COMMAND Tool/Logical Effort/Load Logical Effort Libraries (Purple, Red, and Orange) -->
<!-- PREFERENCE Tools/Logical Effort -->

The Logical Effort tool examines a digital schematic and determines the optimal transistor size to use in order to get maximum speed.
The tool is based on the book <A HREF="http://www.mkp.com/books_catalog/catalog.asp?ISBN=1-55860-557-6"><I>Logical Effort</I></A>,
by Ivan Sutherland, Bob Sproull, and David Harris (Morgan Kaufmann, San Francisco, 1999).
It is highly recommended that the user be familiar with the concept of this book before using the Logical Effort Tool.
<P>
<TABLE><TR><TD>
<BR><BR><BR>
To control Logical Effort, use the
"Logical Effort" preferences (in menu <B>File / Preferences...</B>, "Tools" section, "Logical Effort" tab).
Besides setting the maximum stage gain for whole-cell analysis,
the dialog allows other settings.
<BR><BR><BR>
</TD><TD><CENTER><IMG SRC="fig09-14.png" ALT="Figure 9.14"></CENTER></TD></TR></TABLE>
<P>
Two commands may be given to the Logical Effort tool (in menu <B>Tool / Logical Effort</B>):
<UL>
<LI><B>Optimize for Equal Gate Delays</B>
<LI><B>Print Info for Selected Node</B>
</UL>
<BR>

<H3>Optimize for Equal Gate Delays</H3>
<P>
Optimizes all Logical Effort gates (cells) to have the same delay.  The delay is specified by the
Global fan-out (step-up) option.  This is <I>NOT</I> a path optimization algorithm.
<P>
A Logical Effort gate is simply a schematic or layout cell
that conforms to the following specifications:
<UL>
<LI>The cell has an attribute "LEGATE" which is set to "1".
<LI>The cell has only one output, which may have a logical effort attribute (explained below).
<LI>The cell has zero or more inputs/bidirectional ports.  Each of these must have a
logical effort attribute (explained below).
<LI>The cell has an attribute whose name does not matter, but whose value is "LE.getdrive()",
and whose code is set to "Java".
</UL>
<CENTER><IMG SRC="fig09-25.png" ALT="Figure 9.25"></CENTER>
<P>
On the input and output exports of the cell, we can define an attribute named "le"
(double-click on the export text to get the Export Properties dialog, then click the
Attributes button to define the attribute).  The value
of this attribute is the logical effort of that port.  For example, a NAND gate typically
has a logical effort on each input of 4/3, and an output logical effort of 2.  An inverter is
defined to have an input logical effort of 1, and an output logical effort of 1.
<P>
The size assigned to the logical effort gate is retrieved via the "LE.getdrive()" call. This value
can then be used to size transistors within the gate.  The size retrieved is scaled with respect
to a minimum sized inverter (as are all other logical effort parameters).  So a size of "1"
denotes a minimum sized inverter.
<P>
While these attributes are defined on the layout or schematic cell <I>definition</I>, they must also
be present on the instantiated icon or instance of that definition.  By default this will be so.
<P>
Finally, this command should be performed on a cell containing instances of Logical Effort gates.
There must be at least one load that is driven by the gates in order for them to be sized.  A load
is either a transistor or a capacitor.  Gates that do not drive loads, or that do not drive
gates that drive loads, will not be assigned sizes.
<BR>

<H3>Advanced Features</H3>
<P>
There are several advanced features that may be added to the cell definition:
<UL>
<LI>Attribute "LEKEEPER=1". This cell is defined as a keeper, whose size will be the size of the
smallest Logical Effort gate driving against it, multiplied by the Keeper Ratio.
<LI>Attribute "LEPARALLGRP=0". If set to 0, this gate drives by itself. If an integer greater
than zero, all gates with that value whose outputs drive the same network are assumed to
drive in parallel. The size needed to drive the load on the network will be equally divided
among those gates.
<LI>Attribute "su=-1". This specifies the step-up (fanout) of the gate, and overrides the global
fanout specified in the options.  If set to -1, this attribute is ignored, and the global value is used.
</UL>

<BR>

<H3>Caching Versus Non-Caching Sizing</h3>
<P>
It is intended that both the caching and non-caching algorithms obtain exactly the same result,
however due to the difficulty in obtaining and maintaining correctness when it comes to caching,
the non-caching algorithm is also available.

<BR>

<H3>Back Annotate Wire Loads for the Current Cell</H3>
<P>
The <B>Back Annotate Wire Lengths for Current Cell</B> command
runs NCC on the current cell against it's matching layout or schematic cell.  Assuming they match, for each LEWIRE
in the schematic cell, it finds the half-perimeter of the matching wire in the layout cell (as if the layout was flattened),
and then changes the "L" parameter on the LEWIRE to the value.  Note, back-annotation is only performed on
top level LEWIREs, and it takes into account the wire's length throughout the layout hierarhcy.

<BR>

<H3>Clear LE Sizes</h3>
<P>
LE sizes are stored as parameters on the LEGATE.  Sometimes the sheer number of sizes can
overwhelm the allocated process memory, and can also bloat file sizes when they are no longer needed.
The <B>Clear Sizes on Selected Node(s)</B> and <B>Clear Sizes in all Libraries</B>
commands provide ways to delete saved sizes on a per-node basis, or globally.

<BR>

<H3>Print Info for Selected Node</H3>
<P>
After running sizing, information about a specific logical effort gate can be found by
selecting the gate instance and running this command.
<P>

<!-- TRAILER -->
