<!-- HEADER 1-12-4: Schematics and Layout Tutorial: Hierarchical Design -->

Сейчас вы имеете 2-х входовый вентиль NAND, вы можете использовать его и инвертор для построения 2-х
входового вентиля AND. Такой иерархическое проектирование важно при создании комплексных систем.
Вы можете найти что уровень отдельной ячейки может требовать больших временных затрат. Это очень полезно
повторно использовать ячейки где возможно для избежания  ненужной перерисовки.
Сверх того иерархическое проектирование позволяет определить ошибки более проще. Для примера, если
у вас есть чип с тысячью вентилей NAND и допущена ошибка при проектировании NAND, вы должны представлять
что должны определить одну NAND ячейку поэтому вся тысяча наследует изменение.

<P>
Каждая схема имеет специальный символ называемый icon, используемый для представления ячейки на верхнем уровне
схемы. Для примера, откроем "inv{sch}" и "inv(ic}" ячейки чтобы увидеть схемы инвертора и icon.
Вам потребуется создать icon для 2-х входового вентиля NAND. Создание вашей icon используется для выравнивания 
по элементной сетке.
Это делает создание соединений icon проще и чище когда вы используете их в других ячейках.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig01-38.png" ALT="Figure 1.38"></CENTER></TD><TD>
Редактируя вашу "nand2{sch}" ячейку и используя <B>Make Icon View</B> команду (в меню <B>View</B>).
Electric создаст  icon основанной на экспорте как показано здесь. Поставив icon  в схему для удобства
связи;
перетянув icon от транзисторов.
Вы можете разместить icon на схеме вручную;
Не размещайте icon на транзисторах это сделает схему более читаемой.
</TD></TR></TABLE>
<P>
<TABLE><TR><TD>
Схема проста для восприятия когда собственные icon используются  вместо сгенерированных.
Измените icon на свои. Тщательно подбирайте icon; полностью проектирование выглядит более понятно если 
icon адекватные.

</TD><TD><CENTER><IMG SRC="fig01-39.png" ALT="Figure 1.39"></CENTER></TD></TR></TABLE>
<P>
Для редактирования icon кликните на них и используйте <B>Down Hierarchy</B> команду (в меню <B>Cell</B>) или комбинацию клавиш Ctrl-D.
Вкладка Component сейчас отображается переменными фигурами (это "Artwork" технология).
Удалите сгенерированные черные ящики но оставьте соединения входов и выходов.
Включите на сетку.

<P>
Тело NAND формируется из С-образного полигона, полукруга и маленького инвертирующего круга.
Чтобы нарисовать полукруг возьмите незаполненный круг.
Сделайте двойной клик и измените его размер на 6x6 и оставьте часть (span) в 180 градусов от круга.
Используйте команду (rotate) в меню <B>Edit</B> для вращения полукруга.
Разместите другой круг, изменив его размер на 1x1.
Или Вы можете нажать "h" и использовать клавишу со стрелкой для перемещения объекта на 1/2 шага сетки,
затем нажмите "f" для возвращения прежнего режима передвижения по сетке.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig01-40.png" ALT="Figure 1.40"></CENTER></TD><TD>
Открытый полигоный узел нужно использовать для создания С-образного тела схемного символа.
Вначале выберите зиг-заг, показанный на рисунке.
Для изменения формы надо включить "outline edit mode" ("режим редактирования контура"), для этого включите команду <B>Toggle Outline Edit</B>
(в меню <B>Edit / Modes / Edit</B>), или нажмите "y", или кликните на иконе (icon) "castle" на панели инструментов.
В этом режиме можно использовать левую клавишу мыши для выбора и перемещения точек а правую клавишу мыши для создания точек.
По умолчанию Открытый-Полигон имеет уже 4 точки, Вы можете сделать "C" просто выбрав и переместив эти точки.
Редактирования контура вначале не совсем интуитивно понятно, но Вы станете специалистом, попрактиковавшись.
Затем используйте туже команду для выхода из режима (просто нажмите "y").
Смотрите дополнительную информацию по редактированию линий в <A HREF="chap06-10-01.html#chap06-10-01">Section 6-10-1</A>.
</TD></TR></TABLE>
<P>
Electric очень продвинутая система по возможностям передвижения входов и выходов.
Если Вы кликните и перетащите выделенную линию вдоль входа - всё передвинется.
Если попробовать переместить только имя экспорта то оно не переместиться.
Так как, обычно они перемещаются вместе, когда редактируются иконы (icons).
Для наглядности, уделите тонкую линию экспортного коннектора.
Замените её на чёрную толстую линию.
Для этого кликните левой клавишей на проводнике икона(icon), а затем сделайте правый клик,
поместите курсор в выбранном Вами месте завершения проводника.
Electric нарисует проводник от символа икона (icon).
<P>
Используйте инструмент "Text" на закладке меню Компонентов и поместите метку "nand2" по центру текущего икона(icon).
Текст сделайте высотой в 2 единицы.
<P>
Итак мы сделали икон(icon) с тремя экспортами(exports), создайте новую схему(schematic) с названием "and2" (не забудьте установит вид(view) в "schematic").
Используйте команду <B>Place Cell Instance</B> (в меню <B>Edit</B>) для размещения "nand2{ic}" и "inv{ic}".
Подключите два входа "a" и "b" и выход "y".
Сделайте двойной клик на проводнике между двумя затворами и дайте ему имя "yb" это требуется чтобы знать что мы видим при симуляции схемы.
Хороший стиль это помечать все сети в проекте.
Когда вы закончите схема "and2" должна быть похожа на эту.
<P>
<CENTER><IMG SRC="fig01-41.png" ALT="Figure 1.41"></CENTER>
<P>
Далее, создайте новую топологию (layout) с именем "and2" (не забудьте выбрать вид(view) "layout"("топология")).
Вставьте топологии "nand2{lay}" и "inv{lay}".
ВСЕГДА используйте команду <B>Place Cell Instance</B> для создания топологии из уже сделанных ячеек.
НИКОГДА не используйте команды выделить и поместить для существующих ячеек.
Если использовать команды "выделить" и "поместить" для существующих ячеек то в случае коррекции исходной ячейки, копия ячейки не будет исправлена.
<P>
<TABLE><TR><TD>
При инициализации размещение ячейки (cell instances) представляет из себя чёрный ящик с портами.
Выберите оба размещения ячеек и используйте команду <B>All the Way</B >
(в меню <B>Cell / Expand Cell Instances</B>) для просмотра компонентов каждой топологии (layout).
Подключите источник и землю для каждого размещения.
Поставьте ячейки вместе близко как это возможно без нарушения проектных правил (design rules).
Вам необходимо поместить большие капли на топологию поверх n-карманов и p-карманов избегая ошибки связанных карманов (well-related errors).
Подключите выход "nand2" ко входу "inv", используя Metal-1.
Запомните соединяться могут только порты двух ячеек.
Также соедините шины источника и земли в ячейках, используя Metal-2.
Экспортируйте два входа и выход, а так же источник и землю.
Удобный способ это использовать команду <B>Re-Export Everything</B> (в меню <B>Exports</B>) для экспорта на поверхностный уровень.
В окне Сообщений (Messages window) будет указано сколько экспортов было сделано.
В итоге вентиль должен иметь сходство с этим.
</TD><TD><CENTER><IMG SRC="fig01-42.png" ALT="Figure 1.42"></CENTER></TD></TR></TABLE>

<!-- TRAILER -->
