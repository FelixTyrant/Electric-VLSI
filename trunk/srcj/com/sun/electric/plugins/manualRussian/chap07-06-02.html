<!-- NEED 2in -->

<!-- HEADER 7-6-2: The FPGA Technology -->

<!-- COMMAND Edit/Technology Specific/FPGA/Read Architecture And Primitives... -->
<!-- COMMAND Edit/Technology Specific/FPGA/Read Primitives... -->
<!-- COMMAND Edit/Technology Specific/FPGA/Edit Pips... -->
<!-- COMMAND Edit/Technology Specific/FPGA/Show No Wires -->
<!-- COMMAND Edit/Technology Specific/FPGA/Show Active Wires -->
<!-- COMMAND Edit/Technology Specific/FPGA/Show All Wires -->
<!-- COMMAND Edit/Technology Specific/FPGA/Show Text -->
<!-- COMMAND Edit/Technology Specific/FPGA/Hide Text -->

Технология ПЛИС (FPGA Technology) есть технология, которая создает примитивы согласно файлу FPGA Architecture. Специальные команды меню Edit / Technology Specific / FPGA  позволяют создавать примитивы ПЛИС, строить структуры ПЛИС и программировать их.

<P>
 Файл  FPGA Technology содержит всю информацию, необходимую для того, чтобы задать определенный чип ПЛИС. Файл имеет три раздела: Primitive Definition, Block Definition и Arcitecture. Раздел Primitive Definition описывает базовые блоки семейства ПЛИС (они же являются примитивами технологии ПЛИС). Раздел Block Definition выстраивает примитивы, создавая блоки более высокого уровня. Наконец, раздел Architecture определяет блок наивысшего уровня, который и является собственно чипом ПЛИС. 
<P>
Файл FPGA Architecture должне иметь раздел Primitive Definition section, но ему необязательно иметь разделы Block Definition и Architecture, поскольку в библиотеке Electric сохраняется расположение примитивов, а не архитектурный файл. Таким образом, после того, как прочитаны разделы Primitive Definition (создающий примитивы), Block Definition и Architecture (который располагает примитивы, создавая, таким образом, библиотеку чипа) библиотека может быть сохранена на диск. Далее процесс проектирования можно осуществлять, читая лишь раздел Primitive Definition и библиотеку с определением чипа. Таким образом можно сделать  файлы FPGA Architecture менее громоздкими (поскольку раздел Primitive Definition будет меньше разделов Block Definition и Architecture). 
<P>
<H3>Раздел Primitive Definition </H3>
<P>
Раздел Primitive Definition определяет блоки низшего уровня, которые являются примитивными узлами в технологии ПЛИС. Пример определения примитива: 
<PRE>
(primdef
  (attributes
    (name PRIMNAME)
    (size X Y)
  )
  (ports
    (port
      (name PORTNAME)
      (position X Y)
      (direction input | output | bidir)
    )
  )
  (components
    (pip
      (name PIPNAME)
      (position X Y)
      (connectivity NET1 NET2)
    )
  )
  (nets
    (net
      (name INTNAME)
      (segment FROMPART TOPART)
    )
  )
)
</PRE>
<P>
Раздел attributes определяет общую информацию, касающуюся блока. Раздел ports определяет внешние соединения. Раздел components определяет поведение блока с точки зрения логики (на данный момент функция реализована только для перемычек (PIP)). Раздел nets обределяет интегральные сети. В сети может быть несколько вхождений segment, причем каждый определяет прямую цепь, идущий от FROMPART к TOPART. Эти части могут представляют из себя port PORTNAME или coord X Y, в зависимости от того, где сеть завершается √ в порте или на временной позиции внутри примитива.
<P>
<TABLE><TR><TD VALIGN=TOP>
Например, приведенный блок имеет две вертикальные и две горизонтальные сети. Четыре  перемычки помещаются на пересечениях. Определяются шесть портов (два слева, два сверху и два снизу). Код следующий:
<P>
(primdef<BR>
&nbsp;&nbsp;(attributes<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(name sampleblock)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(size 40 60)<BR>
&nbsp;&nbsp;)<BR>

&nbsp;&nbsp;(ports<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name inleft1) (position  0 40) (direction input) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name inleft2) (position  0 20) (direction input) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name outtop1) (position 10 60) (direction output) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name outtop2) (position 30 60) (direction output) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name outbot1) (position 10  0) (direction output) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name outbot2) (position 30  0) (direction output) )<BR>
&nbsp;&nbsp;)<BR>
<BR>
&nbsp;&nbsp;(components<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(pip (name pip1) (position 10 20) (connectivity intv1 inth1) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(pip (name pip2) (position 30 20) (connectivity intv2 inth1) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(pip (name pip3) (position 10 40) (connectivity intv1 inth2) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(pip (name pip4) (position 30 40) (connectivity intv2 inth2) )<BR>
&nbsp;&nbsp;)<BR>
<BR>
&nbsp;&nbsp;(nets<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name intv1) (segment port outbot1 port outtop1 ) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name intv2) (segment port outbot2 port outtop2 ) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name inth1) (segment port inleft2 coord 30 20 ) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name inth2) (segment port inleft1 coord 30 40 ) )<BR>
&nbsp;&nbsp;)<BR>
)<BR>
</TD><TD><CENTER><IMG SRC="fig07-11.png" ALT="Figure 7.11"></CENTER></TD></TR></TABLE>
<P>
<H3>Разделы Block Definition и Architecture</H3>
<P>
Разделы Block Definition и Architecture определяют блоки высокого уровня, составленные из примитивов. Определение выглядит, например, так:
<PRE>
(blockdef
  (attributes
    (name CHIPNAME)
    (size X Y)
    (wirecolor COLOR)
    (repeatercolor COLOR)
  )

  (ports
    (port
      (name PORTNAME)
      (position X Y)
      (direction input | output | bidir)
    )
  )

  (components
    (instance
      (attributes ATTPAIRS)
      (type BLOCKTYPE)
      (name BLOCKNAME)
      (position X Y)
      (rotation ROT)
    )
    (repeater
      (name BLOCKNAME)
      (porta X Y)
      (portb X Y)
      (direction vertical | horizontal)
    )
  )

  (nets
    (net
      (name INTNAME)
      (segment FROMPART TOPART)
    )
  )
)
<P>
</PRE>
Единственное различие между разделами Architecture и Block Definition состоит в том, что раздел Architecture используют ключевое слово architecture вместо blockdef. Секция architecture может быть только одна, а блоков blockdef может быть множество, причем все вместе они определяют иерархию целиком.
<P>
Раздел attributes определяет общую информацию, касающуюся блока. Раздел ports определяет внешние соединения. Раздел components определяет поведение блока с точки зрения логики (на данный момент реализовано вхождениями других блоков или повторениями). Параметр rotation есть угол поворота против часовой стрелки вокруг центра. Раздел attributes назначает соответсвия между именем и значением (это можно использовать для программирования ПЛИС). 
<P>
Раздел nets определяет внешние сети. В сети может быть несколько вхождений segment, причем каждый определяет прямую цепь, идущую от FROMPART к TOPART. Эти части могут представляют из себя component INSTNAME PORTNAME, port PORTNAME или coord X Y, в зависимости от того, где сеть завершается √ на компоненте, в порте или на временной позиции внутри примитива.
<P>
<TABLE><TR><TD VALIGN=TOP>
Далее следует пример кода определения блока и его размещения.
<P>
(blockdef<BR>
&nbsp;&nbsp;(attributes<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(name testblock)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(size 80 150)<BR>
&nbsp;&nbsp;)<BR>

&nbsp;&nbsp;(components<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(instance (type sampleblock) (name block0)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(position 30 80) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(instance (type sampleblock) (name block1)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(position 30 10) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(repeater (name r0) (porta 10 120)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(portb 20 120) (direction horizontal)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(repeater (name r1) (porta 10 100)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(portb 20 100) (direction horizontal)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(repeater (name r2) (porta 10 50)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(portb 20 50) (direction horizontal)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(repeater (name r3) (porta 10 30)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(portb 20 30) (direction horizontal)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;)<BR>
&nbsp;&nbsp;)
</TD><TD><CENTER><IMG SRC="fig07-25.png" ALT="Figure 7.25"></CENTER></TD></TR></TABLE>
<P>
&nbsp;&nbsp;(ports<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name top0)  (position 40 150) (direction bidir) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name top1)  (position 60 150) (direction bidir) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name left0) (position  0 120) (direction input) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name left1) (position  0 100) (direction input) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name left2) (position  0  50) (direction input) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name left3) (position  0  30) (direction input) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name bot0)  (position 40   0) (direction bidir) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name bot1)  (position 60   0) (direction bidir) )<BR>
&nbsp;&nbsp;)<BR>
<BR>
&nbsp;&nbsp;(nets<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name iv0)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment port top0 component block0 outtop1) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name iv1)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment port top1 component block0 outtop2) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name iv2)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment component block0 outbot1 component block1 outtop1))<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name iv3)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment component block0 outbot2 component block1 outtop2))<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name iv4)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment component block1 outbot1 port bot0) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name iv5)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment component block1 outbot2 port bot1) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name ih0)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment port left0 component r0 a) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name ih1)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment component r0 b component block0 inleft1) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name ih2)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment port left1 component r1 a) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name ih3)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment component r1 b component block0 inleft2) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name ih4)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment port left2 component r2 a) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name ih5)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment component r2 b component block1 inleft1) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name ih6)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment port left3 component r3 a) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name ih7)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment component r3 b component block1 inleft2) )<BR>
&nbsp;&nbsp;)<BR>
)
<P>
<!-- NEED 3in -->
<H3>Команды</H3>
Для того, чтобы прочитать файл архитектуры, следует применить команду Read Architecture And Primitives... (в меню Edit / Technology Specific / FPGA). Далее следует выбрать конкретный файл. Для того, чтобы прочитать из файла архитектуры только примитивы, следует применить команду Read Primitives...
<P>
После того, как ПСИС выведена на экран, можно управлять двумя аспектами ее отображения: цепями и текстом. Отображение цепей управляется тремя командами: Show All Wires показывает все цепи, Show No Wires скрывает все цепи, и Show Active Wires показывает только те цепи, что соединяются с перемычками, которые были запрограммированы. Две команды управляют отбражением текста: Show Text отображает текст, а Hide Text отключает отображение текста. 
<P>
После того, как ПЛИС создана, можно запрограммировать перемычки, выбирая компонент и исполььзуя команду Edit Pips.... Эта команда отобразит список активных перемычек компонента. Например, запрограммировать первую и четвертую перемычки можно, напечатав "pip1 pip4".

<!-- TRAILER -->
